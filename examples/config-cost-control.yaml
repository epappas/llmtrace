# Cost Control Configuration  
# Focus on managing LLM expenses and preventing budget overruns

# Network
listen_addr: "0.0.0.0:8080"
upstream_url: "https://api.openai.com"

# Storage
storage:
  profile: "lite"
  database_path: "llmtrace.db"

# Aggressive Cost Controls
cost_control:
  enabled: true
  
  # Budget Limits
  daily_budget_usd: 500
  weekly_budget_usd: 3000
  monthly_budget_usd: 10000
  
  # Per-Agent Limits
  per_agent_daily_budget_usd: 50
  per_agent_weekly_budget_usd: 300
  
  # Per-Model Budgets
  per_model_daily_budget_usd:
    gpt-4: 200
    gpt-3.5-turbo: 100
    claude-3: 150
  
  # Token Limits
  max_prompt_tokens: 3000
  max_completion_tokens: 1500
  
  # Business Hours Only for Expensive Models
  schedule:
    business_hours_only:
      models: ["gpt-4", "claude-3-opus"]
      hours: "09:00-17:00"
      timezone: "UTC"

# Cost Anomaly Detection
anomaly_detection:
  enabled: true
  cost:
    threshold_multiplier: 1.5  # Alert at 50% increase
    window_minutes: 30
  tokens:
    threshold_multiplier: 2.0
    window_minutes: 15

# Cost-Focused Alerts
alerts:
  slack:
    enabled: true
    webhook_url: "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
    channel: "#cost-alerts"
  
  cost_thresholds:
    daily_spend_percentage: 80   # Alert at 80% of budget
    hourly_spend_usd: 50        # Alert if >$50/hour
    single_request_usd: 5       # Alert on expensive requests

# Basic Security (cost-optimized)
security:
  enable_prompt_injection_detection: true
  enable_pii_detection: false  # Disabled to reduce processing cost
  prompt_injection:
    sensitivity: "low"
    fast_mode: true

# Minimal Logging
logging:
  level: "warn"
  format: "json"