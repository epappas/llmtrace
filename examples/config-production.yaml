# Production Configuration
# Full-featured setup with PostgreSQL, ClickHouse, Redis, and comprehensive monitoring

# Network
listen_addr: "0.0.0.0:8080"
upstream_url: "https://api.openai.com"

# Storage Backends
storage:
  profile: "production"
  postgres_url: "postgresql://llmtrace:password@postgres:5432/llmtrace"
  clickhouse_url: "http://clickhouse:8123"
  clickhouse_database: "llmtrace"
  redis_url: "redis://redis:6379"

# Security Analysis
security:
  enable_prompt_injection_detection: true
  enable_pii_detection: true
  enable_data_leakage_detection: true
  enable_streaming_analysis: true
  
  prompt_injection:
    sensitivity: "high"
  
  pii_detection:
    types: ["email", "phone", "ssn", "credit_card"]
    redaction_enabled: true

# Rate Limiting
rate_limiting:
  enabled: true
  requests_per_minute: 1000
  burst_capacity: 2000
  per_tenant:
    requests_per_minute: 100

# Cost Controls
cost_control:
  enabled: true
  daily_budget_usd: 1000
  per_agent_daily_budget_usd: 100
  max_prompt_tokens: 4000
  max_completion_tokens: 2000

# Alerting
alerts:
  slack:
    enabled: true
    webhook_url: "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
    channel: "#llm-alerts"
  
  email:
    enabled: true
    smtp_host: "smtp.company.com"
    smtp_port: 587
    from_address: "llmtrace@company.com"
    to_addresses: ["security@company.com", "devops@company.com"]

# Monitoring
monitoring:
  prometheus:
    enabled: true
    listen_addr: "0.0.0.0:9090"

# Circuit Breaker
circuit_breaker:
  enabled: true
  failure_threshold: 5
  timeout_seconds: 30

# Logging
logging:
  level: "info"
  format: "json"